name: CI

on:
  push:
    branches: [main, dev-mvp, feat/wails-v2-migration]
  pull_request:
    branches: [main, dev-mvp]

jobs:
  # Backend tests (Go)
  # Frontend tests run locally via pre-push hook, not in CI
  backend:
    name: Backend Tests
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.24'

      - name: Create dummy frontend directory
        run: mkdir -p frontend/dist && echo "CLI build - frontend not included" > frontend/dist/README.txt

      - name: Build
        run: go build -v ./cmd/... ./internal/... ./pkg/...

      - name: Test
        run: go test -v ./...
